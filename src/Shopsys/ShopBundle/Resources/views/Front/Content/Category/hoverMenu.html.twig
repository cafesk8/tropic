{% set isFirstLevel = isFirstLevel is not defined ? true: isFirstLevel %}

{% if categoriesWithLazyLoadedVisibleChildren|length > 0 %}
    <div class="list-menu">
        {% for categoryWithLazyLoadedVisibleChildren in categoriesWithLazyLoadedVisibleChildren %}
            {% set category = categoryWithLazyLoadedVisibleChildren.category %}
            {% if category.level == 1 %}<ul class="list-menu__column">{% endif %}
                <li class="{{ category.level == 1 ? 'list-menu__title' : 'list-menu__item' }}">
                    <a href="{{ url('front_product_list', { id: category.id }) }}"
                       class="list-menu__item__link {% if category.level == 1 %}underline{% else %}list-menu__item__link--level-{{ category.level }}{% endif %}">
                        {{ category.name }}
                    </a>
                    {% set categoriesWithLazyLoadedVisibleChildren = categoryWithLazyLoadedVisibleChildren.children %}

                    {% set isFirstLevel = false %}
                </li>
                {% include _self %}
            {% if category.level == 1 %}</ul>{% endif %}
        {% endfor %}
    </div>
{% endif %}
