{% extends '@ShopsysShop/Front/Layout/layoutWithoutPanel.html.twig' %}
{% import '@ShopsysShop/Front/Inline/Paginator/paginator.html.twig' as paginator %}
{% import '@ShopsysShop/Front/Content/Product/filterFormMacro.html.twig' as productFilterForm %}
{% import '@ShopsysShop/Front/Content/Product/productListMacro.html.twig' as productList %}

{% set domain = getDomain() %}

{% block meta_robots %}
    {{ paginator.metaRobots(paginationResult) }}
{% endblock %}

{% block meta_description %}
    {{- category.getSeoMetaDescription(domain.id)|default(getSeoMetaDescription()) -}}
{% endblock %}

{% block title %}
    {{ category.getSeoTitle(domain.id)|default(category.name) }}
{% endblock %}

{% block main_content %}
    <div class="box-list">
        {{ render(controller('ShopsysShopBundle:Front/Advert:box',{'positionName' : 'productList'})) }}
        <h1 class="box-list__title">
            {{ category.getSeoH1(domain.id)|default(category.name) }}
        </h1>

        <div class="web__line">
            <div class="web__container web__container--big-padding">
                <div class="list-grid-images">
                    <ul class="list-grid-images__category-advantages">
                        <li class="list-grid-images__category-advantages__item">
                            <img class="list-grid-images__category-advantages__item__image left" src="https://placeimg.com/285/100/any" alt="Pro pořádné chlapy">
                            <div class="list-grid-images__category-advantages__item__button right">
                                <span class="double-lined">
                                    {{ 'Praktické'|trans }}
                                </span>
                            </div>
                        </li>
                        <li class="list-grid-images__category-advantages__item">
                            <img class="list-grid-images__category-advantages__item__image center" src="https://placeimg.com/285/100/any" alt="Pro pořádné chlapy">
                            <div class="list-grid-images__category-advantages__item__button center">
                                <span class="double-lined">
                                    {{ 'Zipy, které vydrží'|trans }}
                                </span>
                            </div>
                        </li>
                        <li class="list-grid-images__category-advantages__item left">
                            <img class="list-grid-images__category-advantages__item__image right" src="https://placeimg.com/285/100/any" alt="Pro pořádné chlapy">
                            <div class="list-grid-images__category-advantages__item__button left">
                                <span class="double-lined">
                                    {{ 'Roky ověřené'|trans }}
                                </span>
                            </div>
                        </li>
                        <li class="list-grid-images__category-advantages__item center">
                            <img class="list-grid-images__category-advantages__item__image center" src="https://placeimg.com/285/100/any" class="" alt="Pro pořádné chlapy">
                            <div class="list-grid-images__category-advantages__item__button center">
                                <span class="double-lined">
                                    {{ 'Praktické a stylové'|trans }}
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        {% if visibleChildren is not empty %}
            <h2>{{ 'List of subcategories'|trans }}</h2>

            {% include '@ShopsysShop/Front/Content/Category/categoryList.html.twig' with {'categories': visibleChildren} %}
        {% endif %}
        <div class="web__line">
            <div class="web__container web__container--big-padding">
                <div class="box-list__wrap js-product-list-with-filter">
                    {% if paginationResult.results|length > 0 or filterFormSubmited %}
                        <div class="box-list__panel js-product-list-panel">
                            <div class="box-filter js-product-filter">
                                {{ productFilterForm.filterForm(
                                    filterForm,
                                    url('front_product_list', { id: category.id }),
                                    url('front_product_list', { id: category.id }),
                                    null,
                                    'product_list',
                                    productFilterCountData,
                                    priceRange
                                ) }}
                            </div>
                        </div>
                    {% endif %}

                    <div class="box-list__content js-product-list-ajax-filter-products-with-controls">
                        {{ render(controller('ShopsysShopBundle:Front/Product:selectOrderingModeForList')) }}
                        {% include '@ShopsysShop/Front/Content/Product/productsWithControls.html.twig' with {paginationResult: paginationResult, filterFormSubmited: filterFormSubmited} %}
                    </div>
                </div>
            </div>
        </div>

        <div class="box-list__description">
            <div class="js-category-description box-list__description__text in-user-text">
                {{ category.getDescription(domain.id)|raw }}
            </div>
            <div class="box-list__description__more">
                <span class="js-category-description-load-more link-style box-list__description__more__btn">
                    {{ 'View more'|trans }}
                </span>
            </div>
        </div>
    </div>

    {% block last_visited_products %}
        {{ render(controller('ShopsysShopBundle:Front/LastVisitedProducts:show')) }}
    {% endblock %}

{% endblock %}
