{% extends '@ShopsysShop/Front/Layout/layoutWithoutPanel.html.twig' %}

{% block meta_robots -%}
    <meta name="robots" content="noindex, follow">
{% endblock %}

{% block title %}
    {{ 'Personal data'|trans }}
{% endblock %}
{% block h1 %}{% endblock %}

{% block main_content %}
<div class="web__line">
    <div class="web__container web__container--big-padding">
        <h1 class="in-title in-title--big in-title--center">{{ 'Personal data'|trans }}</h1>
        {{ form_start(form) }}
            {{ form_errors(form) }}

            <div id="{{ form.userData.vars.id }}">
                <div class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Personal data'|trans }}</h2>
                    <div class="wrap-box__in">
                        {{ form_row(form.userData.firstName, { label: 'First name'|trans}) }}
                        {{ form_row(form.userData.lastName, { label: 'Last name'|trans}) }}
                        {{ form_row(form.userData.telephone, { label: 'Telephone'|trans}) }}
                        {{ form_row(form.userData.email, { label: 'E-mail'|trans}) }}
                        <p>
                            {{ 'To prevent the possibility of account theft, the change of the e-mail address must be dealt with individually. If your e-mail address has changed, please contact us.'|trans }}
                        </p>
                    </div>
                </div>

                <div class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Body v bushman klubu'|trans }}</h2>
                    <div class="wrap-box__in">
                        <table class="table-main">
                            <tbody>
                                {% for bushmanClubPointPeriod in bushmanClubPointPeriods %}
                                    <tr>
                                        <td>
                                            {{ bushmanClubPointPeriod.dateFrom|formatDate }} -
                                            {{ bushmanClubPointPeriod.dateTo|formatDate }}
                                        </td>
                                        <td>
                                            {{ bushmanClubPoints(customerId, bushmanClubPointPeriod) }}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Changing password'|trans }}</h2>
                    <div class="wrap-box__in" id="{{ form.userData.password.vars.id }}">
                        {{ form_row(form.userData.password.first, { label: 'Password'|trans}) }}
                        <i class="svg svg-info in-icon in-icon--info form-line__info js-tooltip"
                            data-toggle="tooltip"
                            data-placement="right"
                            title=""
                            data-original-title="{{ 'Password must be at least six characters and can\'t be the same as entered e-mail or its part before at sign.'|trans }}">
                         </i>
                        {{ form_row(form.userData.password.second, { label: 'Password again'|trans}) }}
                    </div>
                </div>
            </div>

            <div id="{{ form.billingAddressData.vars.id }}">
                <div class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Company data'|trans }}</h2>
                    <div class="wrap-box__in">
                        {{ form_widget(form.billingAddressData.companyCustomer, {
                        attr: { class: 'css-checkbox js-checkbox-toggle', 'data-checkbox-toggle-container-id': 'js-company-fields' }})
                        }}
                        <label class="css-checkbox__image" for="{{ form.billingAddressData.companyCustomer.vars.id }}">
                            {{ 'I buy on company behalf'|trans }}
                        </label>
                        <div id="js-company-fields" class="margin-top-20" style="display: none;">
                            {{ form_row(form.billingAddressData.companyName, { label: 'Company'|trans}) }}
                            {{ form_row(form.billingAddressData.companyNumber, { label: 'Company number'|trans}) }}
                            {{ form_row(form.billingAddressData.companyTaxNumber, { label: 'Tax number'|trans}) }}

                            <div class="wrap-box margin-top-20">
                                <h2 class="wrap-box__title">{{ 'Address'|trans }}</h2>

                                <div class="wrap-box__in">
                                    {{ form_row(form.billingAddressData.street, { label: 'Street'|trans}) }}
                                    {{ form_row(form.billingAddressData.city, { label: 'City'|trans}) }}
                                    {{ form_row(form.billingAddressData.postcode, { label: 'Postcode'|trans}) }}
                                    {{ form_row(form.billingAddressData.country, { label: 'Country'|trans}) }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="{{ form.deliveryAddressData.vars.id }}">
                <div class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Shipping address'|trans }}</h2>
                    <div class="wrap-box__in">
                        {{ form_widget(form.deliveryAddressData.addressFilled, {
                            attr: { class: 'css-checkbox js-checkbox-toggle', 'data-checkbox-toggle-container-id': 'js-delivery-address-fields' }})
                        }}
                        <label class="css-checkbox__image" for="{{ form.deliveryAddressData.addressFilled.vars.id }}">
                            {{ 'I want to deliver products to different address than the billing one'|trans }}
                        </label>
                        <div id="js-delivery-address-fields" class="margin-top-20">
                            {{ form_row(form.deliveryAddressData.companyName, { label: 'Company'|trans}) }}
                            {{ form_row(form.deliveryAddressData.firstName, { label: 'First name'|trans}) }}
                            {{ form_row(form.deliveryAddressData.lastName, { label: 'Last name'|trans}) }}
                            {{ form_row(form.deliveryAddressData.telephone, { label: 'Telephone'|trans}) }}
                            {{ form_row(form.deliveryAddressData.street, { label: 'Street'|trans}) }}
                            {{ form_row(form.deliveryAddressData.city, { label: 'City'|trans}) }}
                            {{ form_row(form.deliveryAddressData.postcode, { label: 'Postcode'|trans}) }}

                            {% if app.user.deliveryAddress is null %}
                                {{ form_row(form.deliveryAddressData.country, { label: 'Country'|trans}) }}
                            {% else %}
                                {{ form_row(form.deliveryAddressData.country, { label: 'Country'|trans, attr: { disabled: 'disabled' } }) }}
                            {% endif %}

                        </div>
                    </div>
                </div>
            </div>

            <div class="text-right">
                {{ form_widget(form.save, { label: 'Save changes'|trans}) }}
            </div>

        {{ form_end(form) }}
    </div>
</div>
{% endblock %}
