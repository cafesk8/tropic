{% extends 'Front/Layout/base.html.twig' %}
{% use 'Front/Layout/header.html.twig' %}

{% block headerClass %}{% endblock %}
{% block headerLayoutClass %}{% endblock %}

{% block html_body %}
    {% set adminLoggedAsCustomer = app.session.has(constant('Shopsys\\FrameworkBundle\\Model\\Security\\LoginAsUserFacade::SESSION_LOGIN_AS')) %}
    {% if adminLoggedAsCustomer or isMailerSettingUnusual() %}
        <div class="window-bar dont-print">
            {% if adminLoggedAsCustomer %}
                <div class="window-bar__item">
                    {{ 'Attention! You are administrator logged in as the customer.'|trans }}
                    <a href="{{ url('front_logout', { _csrf_token: csrf_token('frontend_logout')}) }}">{{ 'Log out'|trans }}</a>
                </div>
            {% endif %}
            {% if isMailerSettingUnusual() %}
                <div class="window-bar__item">
                    {{ getMailerSettingInfo() }}
                </div>
            {% endif %}
        </div>
    {% endif %}
    <div class="web__in">
        <div class="web__line">
            <div class="web__header {{ block('headerLayoutClass') }}">
                {{ block('header') }}
            </div>

            {% block infoRow %}
                {% if isInfoRowVisible() %}
                    <div class="web__container" id="js-info-row" data-now="{{ 'now'|formatDateCore(constant('App\\Component\\InfoRow\\InfoRowFacade::COOKIE_CLOSED_AT_FORMAT')) }}">
                        <div class="box-info-row">
                            {{ getInfoRowText() }}
                        </div>
                    </div>
                {% endif %}
            {% endblock %}

            {% block content %}{% endblock %}

            {% block footer %}
                {% embed 'Front/Layout/footer.html.twig' %}{% endembed %}
            {% endblock %}
        </div>
    </div>
    {% if not isCookiesConsentGiven() %}
        {% set cookiesArticle = findCookiesArticleByDomainId(getDomain().id) %}
        <div class="box-cookies dont-print js-eu-cookies">
            <div class="box-cookies__title">
                {{ 'Cookies nejsou sušenky'|trans }}
            </div>

            <div class="box-cookies__text">
                <span class="display-none-tablet display-inline-block">
                    {{ 'Sbíráme anonymní data a měříme, abychom náš web mohli dále vylepšovat. Souhlasíte se sběrem cookies?'|trans }}
                </span>
                <span class="display-none display-inline-block-tablet">
                    {{ 'Souhlasíte se sběrem cookies?'|trans }}
                </span>
            </div>
            <div class="box-cookies__buttons">
                <button class="btn btn--success box-cookies__buttons__agree js-eu-cookies-consent-button" type="button">{{ 'V pořádku'|trans }}</button>
                <span class="box-cookies__buttons__link__wrap">
                    {% if cookiesArticle is not null %}
                        <a class="box-cookies__buttons__link" href="{{ url('front_article_detail', { id: cookiesArticle.id }) }}" target="_blank">
                            {{- 'More information'|trans -}}
                        </a>
                    {% endif %}
                </span>
            </div>

            <div class="box-cookies__close js-eu-cookies-close-button"><i class="svg svg-remove"></i></div>
        </div>
    {% endif %}
{% endblock %}
